<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parent Page</title>
    <script>
        window.addEventListener('message', receiveMessage, false);

        function receiveMessage(event) {
            if (event.origin != 'https://openteccomputaosistemasltdademo4.servicenow.com') {
                // Ignore messages from unknown domains
                return;
            }

            // Check if the received data indicates the need for SSO
            if (event.data.type === "SESSION_CREATED" && event.data.authenticated === false) {
                // Redirect to SSO login with the specified redirect URI
                window.location.href = "https://openteccomputaosistemasltdademo4.service-now.com/sn_va_web_client_login.do?sysparm_redirect_uri=" + encodeURIComponent(window.location.href);
            }

            if (event.data.type === "SESSION_LOGGED_OUT") {
                // Redirect to SSO login with the specified redirect URI
                window.location.href = "https://openteccomputaosistemasltdademo4.service-now.com/sn_va_web_client_login.do?sysparm_redirect_uri=" + encodeURIComponent(window.location.href);
            }
        }
    </script>
</head>
<body>
    <iframe id="sn_va_web_client"
        title="ServiceNow Virtual Agent Client"
        width="600"
        height="900"
        src="https://openteccomputaosistemasltdademo4.servicenow.com/sn_va_web_client_app__embed.do">
    </iframe>
</body>
</html>

